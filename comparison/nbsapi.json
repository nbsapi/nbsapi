{"openapi":"3.1.0","info":{"title":"nbsapi","description":"\n## NBSAPI\nAn API for interoperability between digital tools that help to build and manage nature-based solutions in the built and natural environment. This API provides a way for tool builders to share their data with interested parties in a standardized fashion. The API is fully configurable in that the tool builders customize the data sharing based on the capability of their service. \n\n\nThe API provides endpoints for these operations and in general we anticipate that the NbS tool / service owner will be using the POST endpoints to populate the service description and the clients will primarily use the GET endpoints to query and process the data. As the API grows, this pattern may change. \n\nThe API also provides a way to authenticate and authorize via JWT tokens, it is expected that the tool / service builder (NBSAPI adopter) will specify their own access method and other rules, we anticipate that for some of the portions of the API there may be access controls and limitations. An example is defined in the `Users` endpoint here, this can be swapped with any other token generation mechanism that the adopter may have. \n\nDefinitions of some key concepts are below: \n\n### Nature Based Solutions\nSolutions that are inspired and supported by nature, which are cost-effective, **simultaneously provide environmental, social and economic benefits** and **help build resilience**.  \nSuch solutions bring more, and more diverse, nature and natural features and processes into cities, landscapes and seascapes, through **locally adapted, resource-efficient and systemic interventions**.\nYour service handles and manages these solutions internally, the `solutions` endpoints provide a way for your to share your tool or service's capabilities via these endpoints. You use the \"Add solutions\" endpoint once to publish your tool or services's capabilities.\n\n### Adaptation Targets\nAdaptation targets define and quantify the type of adaptation facilitated by a `Nature-Based Solution`, each target having an associated value 0 - 100.  \nEach NbS may have **one or more** adaptation targets. As a tool builder, you specify the adaptation target for your service. \n\n### Impacts\nThese are the adaptation impacts of `Nature-Based Solution`s. An impact has a magnitude, an `ImpactIntensity`, and an associated `ImpactUnit`, which may describe e.g. area or volume.\n\n","version":"0.1.0"},"paths":{"/auth/token":{"post":{"tags":["users"],"summary":"Login For Access Token","operationId":"login_for_access_token_auth_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_auth_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/currentversion":{"get":{"summary":"Get Current Api Version","description":"Retrieve the current API version","operationId":"get_current_api_version_currentversion_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiVersion"}}}}}}},"/contact":{"get":{"summary":"Get Contact","description":"Retrieve the contact address for this API","operationId":"get_contact_contact_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"string","format":"email","title":"Response Get Contact Contact Get"}}}}}}},"/v1/api/users/{user_id}":{"get":{"tags":["users"],"summary":"User Details","description":"Get any user details","operationId":"user_details_v1_api_users__user_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/api/users/user":{"post":{"tags":["users"],"summary":"Write User","description":"Create a new user","operationId":"write_user_v1_api_users_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWrite"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/api/solutions/solutions/{solution_id}":{"get":{"tags":["solutions"],"summary":"Read Nature Based Solution","description":"Retrieve a nature-based solution using its ID","operationId":"read_nature_based_solution_v1_api_solutions_solutions__solution_id__get","parameters":[{"name":"solution_id","in":"path","required":true,"schema":{"type":"integer","title":"Solution Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatureBasedSolutionRead"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/api/solutions/solutions":{"post":{"tags":["solutions"],"summary":"Get Solutions","description":"Return a list of nature-based solutions using _optional_ filter criteria:\n\n- `targets`: An array of one or more **adaptation targets** and their associated protection values. Solutions having targets with protection values **equal to or greater than** the specified values will be returned\n- `bbox`: An array of 4 EPSG 4326 coordinates: `[xmin, ymin, xmax, ymax]` / `[west, south, east, north]` Only solutions intersected by the bbox will be returned. It must be **<=** 1 km sq\n- `intensity`: An array of one or more **adaptation intensities**","operationId":"get_solutions_v1_api_solutions_solutions_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/SolutionRequest"},{"type":"null"}],"title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/NatureBasedSolutionRead"},"type":"array","title":"Response Get Solutions V1 Api Solutions Solutions Post"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/api/solutions/add_solution/":{"post":{"tags":["solutions"],"summary":"Write Nature Based Solution","description":"Add a nature-based solution. The payload must be a `NatureBasedSolutionRead` object.\nIts `adaptations` array must contain one or more valid `AdaptationTargetRead` objects","operationId":"write_nature_based_solution_v1_api_solutions_add_solution__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatureBasedSolutionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatureBasedSolutionRead"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/api/adaptation_targets/adaptation_target":{"get":{"tags":["adaptation targets"],"summary":"Read Targets","description":"Retrieve all available adaptation targets","operationId":"read_targets_v1_api_adaptation_targets_adaptation_target_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TargetBase"},"type":"array","title":"Response Read Targets V1 Api Adaptation Targets Adaptation Target Get"}}}},"404":{"description":"Not found"}}},"post":{"tags":["adaptation targets"],"summary":"Write Target","description":"Create a new adaptation target","operationId":"write_target_v1_api_adaptation_targets_adaptation_target_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TargetBase"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TargetBase"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/api/impacts/impacts":{"get":{"tags":["impacts"],"summary":"Read Impacts","description":"Retrieve all available adaptation impacts","operationId":"read_impacts_v1_api_impacts_impacts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ImpactBase"},"type":"array","title":"Response Read Impacts V1 Api Impacts Impacts Get"}}}},"404":{"description":"Not found"}}}},"/v1/api/impacts/impact_intensities":{"get":{"tags":["impacts"],"summary":"Read Impact Intensity","description":"Retrieve all available adaptation impact intensities","operationId":"read_impact_intensity_v1_api_impacts_impact_intensities_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ImpactIntensity"},"type":"array","title":"Response Read Impact Intensity V1 Api Impacts Impact Intensities Get"}}}},"404":{"description":"Not found"}}},"post":{"tags":["impacts"],"summary":"Write Impact Intensity","description":"Create a new impact intensity measure","operationId":"write_impact_intensity_v1_api_impacts_impact_intensities_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImpactIntensity"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImpactIntensity"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/v1/api/impacts/impact_units":{"get":{"tags":["impacts"],"summary":"Read Impact Unit","description":"Retrieve all available adaptation impact units","operationId":"read_impact_unit_v1_api_impacts_impact_units_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ImpactUnit"},"type":"array","title":"Response Read Impact Unit V1 Api Impacts Impact Units Get"}}}},"404":{"description":"Not found"}}},"post":{"tags":["impacts"],"summary":"Write Impact Unit","description":"Create a new impact intensity unit","operationId":"write_impact_unit_v1_api_impacts_impact_units_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImpactUnit"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImpactUnit"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"AdaptationTargetRead":{"properties":{"adaptation":{"$ref":"#/components/schemas/TargetBase"},"value":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Value"}},"type":"object","required":["adaptation","value"],"title":"AdaptationTargetRead","description":"Adaptation targets define and quantify the type of adaptation facilitated by a Nature-based solution, each target having an associated value 0 - 100","examples":[{"adaptation":{"type":"Heat"},"value":80}]},"ApiVersion":{"properties":{"version":{"type":"integer","title":"Version"}},"type":"object","required":["version"],"title":"ApiVersion","description":"The API version. `version` is a positive integer, monotonically increasing","examples":[{"version":1},{"version":2}]},"Body_login_for_access_token_auth_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_auth_token_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ImpactBase":{"properties":{"magnitude":{"type":"number","title":"Magnitude"},"unit":{"$ref":"#/components/schemas/ImpactUnit"},"intensity":{"$ref":"#/components/schemas/ImpactIntensity"}},"type":"object","required":["magnitude","unit","intensity"],"title":"ImpactBase","description":"NbS Impact"},"ImpactIntensity":{"properties":{"intensity":{"type":"string","title":"Intensity"}},"type":"object","required":["intensity"],"title":"ImpactIntensity","description":"Impact intensity","examples":[{"intensity":"low"},{"intensity":"medium"}]},"ImpactUnit":{"properties":{"unit":{"type":"string","title":"Unit"},"description":{"type":"string","title":"Description"}},"type":"object","required":["unit","description"],"title":"ImpactUnit","description":"Impact unit of measure","examples":[{"description":"shade","unit":"m2"},{"description":"water volume","unit":"m3"}]},"NatureBasedSolutionCreate":{"properties":{"name":{"type":"string","title":"Name","examples":["Coastal Restoration"]},"definition":{"type":"string","title":"Definition","examples":["Definition of the solution"]},"cobenefits":{"type":"string","title":"Cobenefits","examples":["Improved biodiversity"]},"specificdetails":{"type":"string","title":"Specificdetails","examples":["Detailed information"]},"location":{"type":"string","title":"Location","examples":["Coastal Area X"]},"impacts":{"items":{"$ref":"#/components/schemas/ImpactBase"},"type":"array","title":"Impacts","description":"The adaptation impact","examples":[[{"intensity":{"intensity":"low"},"magnitude":10.5,"unit":{"description":"shade","unit":"m2"}}]]},"adaptations":{"items":{"$ref":"#/components/schemas/AdaptationTargetRead"},"type":"array","title":"Adaptations","description":"List of adaptation types and their corresponding values","examples":[[{"adaptation":{"type":"Heat"},"value":10},{"adaptation":{"type":"Pluvial Flooding"},"value":20}]]}},"type":"object","required":["name","definition","cobenefits","specificdetails","location"],"title":"NatureBasedSolutionCreate"},"NatureBasedSolutionRead":{"properties":{"name":{"type":"string","title":"Name","examples":["Coastal Restoration"]},"definition":{"type":"string","title":"Definition","examples":["Definition of the solution"]},"cobenefits":{"type":"string","title":"Cobenefits","examples":["Improved biodiversity"]},"specificdetails":{"type":"string","title":"Specificdetails","examples":["Detailed information"]},"location":{"type":"string","title":"Location","examples":["Coastal Area X"]},"impacts":{"items":{"$ref":"#/components/schemas/ImpactBase"},"type":"array","title":"Impacts","description":"The adaptation impact","examples":[[{"intensity":{"intensity":"low"},"magnitude":10.5,"unit":{"description":"shade","unit":"m2"}}]]},"id":{"type":"integer","title":"Id"},"solution_targets":{"items":{"$ref":"#/components/schemas/AdaptationTargetRead"},"type":"array","title":"Solution Targets","description":"List of AdaptationTarget and their corresponding values"}},"type":"object","required":["name","definition","cobenefits","specificdetails","location","id"],"title":"NatureBasedSolutionRead"},"SolutionRequest":{"properties":{"targets":{"anyOf":[{"items":{"$ref":"#/components/schemas/AdaptationTargetRead"},"type":"array"},{"type":"null"}],"title":"Targets","description":"List of adaptation targets to filter by"},"intensities":{"anyOf":[{"items":{"$ref":"#/components/schemas/ImpactIntensity"},"type":"array"},{"type":"null"}],"title":"Intensities","description":"List of impact intensities to filter by"},"bbox":{"anyOf":[{"items":{"type":"number"},"type":"array","maxItems":4,"minItems":4},{"type":"null"}],"title":"Bbox","description":"Bounding box specified as [west, south, east, north]. The list should contain exactly four float values. Max 1 sq km"}},"type":"object","title":"SolutionRequest","examples":[{"adaptation":{"type":"Heat","value":10},"bbox":[-6.2757665,53.332055,-6.274319,53.332553],"intensities":[{"intensity":"low"}]}]},"TargetBase":{"properties":{"type":{"type":"string","title":"Type"}},"type":"object","required":["type"],"title":"TargetBase","description":"A type of climate adaptation","examples":[{"type":"Pluvial flooding"},{"type":"Drought"}]},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"User":{"properties":{"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","examples":["nbsapi_user_4197"]},"email":{"type":"string","format":"email","title":"Email","examples":["user4277@domain.com"]},"first_name":{"type":"string","title":"First Name","examples":["Jane"]},"last_name":{"type":"string","title":"Last Name","examples":["Doe"]},"disabled":{"type":"boolean","title":"Disabled","default":false,"examples":[false]}},"type":"object","required":["username","email","first_name","last_name"],"title":"User"},"UserWrite":{"properties":{"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username","examples":["nbsapi_user_4197"]},"email":{"type":"string","format":"email","title":"Email","examples":["user4277@domain.com"]},"first_name":{"type":"string","title":"First Name","examples":["Jane"]},"last_name":{"type":"string","title":"Last Name","examples":["Doe"]},"password":{"type":"string","minLength":8,"title":"Password","examples":["nbsapi8415"]}},"type":"object","required":["username","email","first_name","last_name","password"],"title":"UserWrite"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/auth/token"}}}}},"tags":[{"name":"users","description":"Operations with users. The **login** logic is also here."},{"name":"solutions","description":"Retrieve and create Nature-Based Solutions."},{"name":"adaptation targets","description":"Retrieve and create Adaptation Targets."},{"name":"impacts","description":"Retrieve adaptation impacts."}]}